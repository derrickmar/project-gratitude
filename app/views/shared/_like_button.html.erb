<% if like = current_or_guest_user.likes.find_by(note_id: note.id) %>
  <%= form_for like, :html => { :method => :delete },
                     :remote => true do |f| %>
    <%= f.submit "Unlike" %>
  <% end %>
<% else %>
  <%= form_for current_or_guest_user.likes.build(:note_id => note.id), :remote => true do |f| %>
  <%= f.hidden_field :note_id %>
    <%= f.hidden_field :user_id %>
    <%= f.submit "Like" %>
  <% end %>
<% end %>
